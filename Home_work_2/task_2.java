// Task_2

// На первой строке записывается натуральное число n - количество строчек в книге. Затем вводится n строк - строки книги. потом вводится натуральное число m - количество продуктов, на которые у человека аллергия. Потом вводится m строк - вида "продукт1 - продукт2", где продукт1 - продукт, на который у человека аллергия и продукт2 - продукт, на который следует заменить продукт1. Гарантируется что любой продукт состоит из 1 слова. название продуктов написаны строчными буквами. Гарантируется, что продукты, на которые нужно выполнить замену, не встречаются изначально в тексте.

// Выходные данные
// Замените все продукты в поваренной книге Васи и выведите их построчно на экран. На окончания не обращайте внимание. ВАЖНО!!! Если продукт, который следует заменить написан с большой буквы, то и замена тоже должна начинаться с большой буквы!

// Sample Input:

// 2
// Рецепт 1. Арахис 100гр, мороженое 200гр. Возьмите арахис и измелчите его. Посыпьте измельчённый арахис на мороженое.
// Рецепт 2. Клубника 100гр, сгущенка 3кг. Смешать, есть) Радоваться жизни.
// 3
// арахис - колбаса
// клубника - вишня
// сгущенка - молоко
// Sample Output:

// Рецепт 1. Колбаса 100гр, мороженое 200гр. Возьмите колбаса и измелчите его. Посыпьте измельчённый колбаса на мороженое.
// Рецепт 2. Вишня 100гр, молоко 3кг. Смешать, есть) Радоваться жизни.

package Home_work_2;

import java.util.*;

public class task_2 {
public static void main(String[] args) {
Scanner scanner = new Scanner(System.in);

  int n = scanner.nextInt(); // количество строк в книге
  scanner.nextLine(); // съедаем символ новой строки после n

  String[] book = new String[n]; // массив строк книги
  for (int i = 0; i < n; i++) {
      book[i] = scanner.nextLine(); // считываем строку книги
  }

  int m = scanner.nextInt(); // количество продуктов, на которые у человека аллергия
  scanner.nextLine(); // съедаем символ новой строки после m

  Map<String, String> replacements = new HashMap<>(); // словарь для замен
  for (int i = 0; i < m; i++) {
      String[] pair = scanner.nextLine().split(" - "); // считываем пару продуктов
      replacements.put(pair[0], pair[1]); // добавляем в словарь
  }

  for (String recipe : book) {
      String[] words = recipe.split(" "); // разбиваем строку на слова
      for (int i = 0; i < words.length; i++) {
          String word = words[i].toLowerCase(); // приводим слово к нижнему регистру для поиска в словаре
          if (replacements.containsKey(word)) { // если слово есть в словаре
              String replacement = replacements.get(word); // получаем продукт-замену
              char firstLetter = words[i].charAt(0); // первая буква заменяемого слова
              if (Character.isUpperCase(firstLetter)) { // если первая буква заглавная
                  replacement = capitalize(replacement); // делаем первую букву замены заглавной
              }
              words[i] = replacement; // заменяем слово
          }
      }
      System.out.println(String.join(" ", words)); // выводим строку книги с замененными продуктами
  }
}


// метод для приведения первой буквы строки к заглавной
private static String capitalize(String s) {
  if (s == null || s.isEmpty()) {
      return s;
  }
  return Character.toUpperCase(s.charAt(0)) + s.substring(1);
}
}

  



